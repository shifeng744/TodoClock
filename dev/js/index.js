console.log(2)(function(){function t(t){v.push(t),store.set("gg",v)}function e(){var t=$(".task-list");t.html(null);for(var e=[],a=0;a<v.length;a++)if(v[a].complated)e[a]=v[a];else{var s=n(v[a],a);t.append(s),u(s)}for(var l=0;l<e.length;l++)e[l]&&((s=n(e[l],l)).addClass("cur"),t.append(s));i(),c(),m()}function n(t,e){var n='<li data-index="'+e+'"><input type="checkbox" class="complate" '+(t.complated?"checked":"")+'><p class="content">'+t.content+'</p><div class="right"><span class="delete r-main">删除</span><span class="detail r-main">详细</span></div></li>';return $(n)}function i(){$(".delete.r-main").click(function(){var t=$(this).parent().parent().data("index"),e=!1;$(".Alert").show(),$(".primary.confirm").bind("click",function(){e=!0,v.splice(t,1),$(".Alert").hide(),a(),$(".primary.confirm").unbind()}),$(".cancel").click(function(){e=!1,$(".Alert").hide()})})}function a(){store.set("gg",v),e()}function c(){$(".detail.r-main").click(function(){var t=$(this).parent().parent().data("index");s(v[t],t),jQuery.datetimepicker.setLocale("ch"),$(".datetimepicker").datetimepicker()})}function s(t,e){var n='<div class="task-detail-mask"></div><div class="task-detail"><form class="up-task"><h2 class="content">'+(t.content||"")+'</h2><input type="text" class="modify"  style="display:none"/><div class="input-item"><textarea class="taile">'+(t.tatil||"")+'</textarea></div><div class="remind input-item"><label for="b">提醒时间</label><input id="b" class="datetime datetimepicker" type="text" value="'+(t.datetime||"")+'"></div><div class="input-item"><button class="ut-data">更新</button></div><div class="colse">X</div></form></div>';$(".container .task-list").after(n),l(),o(e),r()}function l(){$task_detail_mask=$(".task-detail-mask,.colse"),$task_detail_mask.click(function(){$(".task-detail-mask,.task-detail").remove()})}function o(t){$(".up-task").on("submit",function(n){n.preventDefault();var i={};i.content=$(this).find(".content").text(),i.tatil=$(this).find(".taile").val(),i.datetime=$(this).find(".datetime").val(),d(i,t),$(".task-detail-mask,.task-detail").remove(),e()})}function d(t,e){v[e]=$.extend({},v[e],t),store.set("gg",v)}function r(){$(".up-task .content").dblclick(function(){var t=$(this);$cont=$(".up-task .content"),$mod=$(".container .up-task .modify"),$cont.hide(),$mod.show(),$mod.focus(),$mod.on("blur",function(){t.show(),$(this).hide(),$(this).val()&&t.text($(this).val())})})}function m(){$(".task-list .complate").on("click",function(){$(this);var t=$(this).parent().data("index");v[t].complated?d({complated:!1},t):d({complated:!0},t),e()})}function u(t){$(t)[0]&&(clearInterval($(t)[0].timer),$(t)[0].timer=setInterval(function(){for(var e=(new Date).getTime(),n=v,i=0;i<n.length;i++)n[i].complated||!n[i].datetime||n[i].off||new Date(n[i].datetime).getTime()-e<=1&&(clearInterval($(t)[0].timer),console.log("播放音乐"),p(),f(v[i],i))},1e3))}function f(t,e){$(".msg").show(),$(".msg-content").text(t.content),$(".msg-btn").click(function(){d({off:!0},e),$(".msg").hide()})}function p(){document.getElementById("music").play()}var v=[],k=$(".add-task");v=store.get("gg")||[],e(),u(),k.on("submit",function(n){n.preventDefault();var i={};i.content=k.find("input").eq(0).val(),i.content&&(t(i),e(),k.find("input").eq(0).val(null))})}());